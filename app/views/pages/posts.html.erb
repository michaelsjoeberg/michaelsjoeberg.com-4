<%= render 'navigation' %>

<div class="container p-md-5 p-sm-3">
    <!-- render post -->
    <% if @post != nil %>

        <%= render 'post' %> 

    <!-- else render all posts -->
    <% else %>
        <!-- header -->
        <div class="row justify-content-center">
            <!-- title -->
            <div class="col-12 col-lg-5">
                <h1><%= @meta_title %></h1>
            </div>
            <!-- search -->
            <div class="col-12 col-lg-5 text-md-right">
                <input id="search" class="pl-3" name="search" placeholder="Search" type="text" data-list=".list" autocomplete="off" style="margin-top:9px;min-width:100%;">
            </div>
        </div>
        <!-- summary -->
        <div class="row justify-content-center">
            <!-- divider -->
            <div class="col-12 col-md-10"><div class="divider"></div></div>
            <!-- intro -->
            <div class="col-12 col-md-10" style="column-count: 1;">
                <p class="font-family-serif mb-0">This is a collection of infrequent posts, mostly notes on technology, programming, and investing.</p>
            </div>
            <!-- divider -->
            <div class="col-12 col-md-10"><div class="divider"></div></div>
        </div>
        <!-- render posts -->
        <div class="row justify-content-center">
            <div class="col-12 col-lg-10">
                <div class="row list">
                    <% @posts_array.keys.each do |post| %>
                    <!-- item -->
                    <li class="col-12 mb-3">
                        <div class="row">
                            <div class="col-12">
                                <!-- post:name -->
                                <h2>
                                    <a href="/<%= @route_path %>/<%= post %>">
                                        <%= @posts_array[post][:title] %>
                                    </a>
                                </h2>
                                <!-- tags -->
                                <p class="m-0">
                                <% @posts_array[post][:tags].each do |tag| %>
                                    <span><%= tag %><% unless tag.equal?(@posts_array[post][:tags].last) %> / <% end %></span>
                                <% end %>
                                <!-- date -->
                                <span class="text-muted float-right"><%= Date.parse(post).strftime("%b %d, %Y") %></span>
                                </p>
                            </div>
                        </div>
                    </li>
                    <% end %>
                </div>
            </div>
        </div>
    <% end %>
</div>